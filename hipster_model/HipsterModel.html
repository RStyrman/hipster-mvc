        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Library hipster_model / Class HipsterModel</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css" />
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico" />
        <script src="../client-live-nav.js"></script>
        
        </head>
        <body data-library="hipster_model" data-type="HipsterModel">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Hipster MVC Documentation</a>
         &rsaquo; <a href="../hipster_model.html">hipster_model</a> &rsaquo; <a href="../hipster_model/HipsterModel.html">HipsterModel</a></div>
        <div class="nav">
        
</div>
<div class="content">
        <h2>Class
            <strong>HipsterModel</strong></h2>
        
<div class="doc">
<p>HipsterModel encapsulates individual records in your backend datastore. At
its most concise, a model need only to implement the <a class="crossref" href="../hipster_model/HipsterModel.html#get:urlRoot">urlRoot</a> method:</p>
<pre><code>class ComicBook extends HipsterModel {
  get urlRoot() =&gt; '/comics';
}
</code></pre>
</div>
<h3>Implements</h3>
<p>
<span class="type-box"><span class="icon-interface"></span><a href="http://api.dartlang.org/dart_core/Hashable.html" ref="external">Hashable</a></span></p>
<h3>Constructors</h3>
<div class="method"><h4 id="HipsterModel">
<span class="show-code">Code</span>
new <strong>HipsterModel</strong>([attributes]) <a class="anchor-link" href="#HipsterModel"
              title="Permalink to HipsterModel.HipsterModel">#</a></h4>
<div class="doc">
<p>If attributes is not supplied, it will be initalied to an empty
<code>HashMap</code>.</p>
<pre class="source">
HipsterModel([this.attributes]) {
  on = new ModelEvents();
  if (attributes == null) attributes = {};
}
</pre>
</div>
</div>
<h3>Static Methods</h3>
<div class="method"><h4 id="hash">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/String.html" ref="external">String</a> <strong>hash</strong>() <a class="anchor-link" href="#hash"
              title="Permalink to HipsterModel.hash">#</a></h4>
<div class="doc">

<pre class="source">
static String hash() {
  return (new Date.now()).value.hashCode().toRadixString(16);
}
</pre>
</div>
</div>
<h3>Methods</h3>
<div class="method"><h4 id=":index">
<span class="show-code">Code</span>
<strong>operator []</strong>(attr) <a class="anchor-link" href="#:index"
              title="Permalink to HipsterModel.operator []">#</a></h4>
<div class="doc">
<p>Convenience operator for attribute lookup:</p>
<pre><code>var comic = new ComicBook({'title': 'Superman'});
comic['title'];
// =&gt; 'Superman'
</code></pre>
<pre class="source">
operator [](attr) =&gt; attributes[attr];
</pre>
</div>
</div>
<div class="method"><h4 id="delete">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/Future.html" ref="external">Future</a> <strong>delete</strong>() <a class="anchor-link" href="#delete"
              title="Permalink to HipsterModel.delete">#</a></h4>
<div class="doc">
<p>Instructs the backend datastore that this recored should be deleted. Upon
successful removal, this method returns a <code>Future</code> that can be used to
perform subsequent action:</p>
<pre><code>comic.
  delete.
  then((_) { print("Now I am sad.") });
</code></pre>
<pre class="source">
Future&lt;HipsterModel&gt; delete() {
  Completer completer = new Completer();

  HipsterSync.
    call('delete', this).
    then((attrs) {
      var event = new ModelEvent('delete', this);
      on.delete.dispatch(event);

      completer.complete(this);
    });

  return completer.future;
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:id">
<span class="show-code">Code</span>
<strong>get id</strong>() <a class="anchor-link" href="#get:id"
              title="Permalink to HipsterModel.get id">#</a></h4>
<div class="doc">
<p>The ID of the record in the backend store.</p>
<pre class="source">
get id() =&gt; attributes['id'];
</pre>
</div>
</div>
<div class="method"><h4 id="isSaved">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html" ref="external">bool</a> <strong>isSaved</strong>() <a class="anchor-link" href="#isSaved"
              title="Permalink to HipsterModel.isSaved">#</a></h4>
<div class="doc">
<p>Returns true if the model has been <em>previously</em> saved to the backend (not
if the most recent changes have been saved).</p>
<pre class="source">
bool isSaved() =&gt; id != null;
</pre>
</div>
</div>
<div class="method"><h4 id="save">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/Future.html" ref="external">Future</a> <strong>save</strong>() <a class="anchor-link" href="#save"
              title="Permalink to HipsterModel.save">#</a></h4>
<div class="doc">
<p>Either creates or updates this record in the backend datastore. This
method returns a <code>Future</code> that can be used to perform subsequent actions
upon successful save:</p>
<pre><code>comic.
  save().
  then((_) { print("Yay! New comics!"); });
</code></pre>
<pre class="source">
Future&lt;HipsterModel&gt; save() {
  Completer completer = new Completer();
  String operation = isSaved() ? 'update' : 'create';
  Future after_call = HipsterSync.call(operation, this);

  after_call.
    then((attrs) {
      this.attributes = attrs;
      on.load.dispatch(new ModelEvent('save', this));
      completer.complete(this);
    });

  after_call.
    handleException((e) {
      completer.completeException(e);
      return true;
    });

  return completer.future;
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:url">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/String.html" ref="external">String</a> <strong>get url</strong>() <a class="anchor-link" href="#get:url"
              title="Permalink to HipsterModel.get url">#</a></h4>
<div class="doc">
<p>The URL at which creates or updates are stored. If the model has already
been saved to the backend, then the ID will be appended
(e.g. <code>/comics/42</code>).</p>
<pre class="source">
String get url() =&gt; isSaved() ?
  "$urlRoot/$id" : urlRoot;
</pre>
</div>
</div>
<div class="method"><h4 id="get:urlRoot">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/String.html" ref="external">String</a> <strong>get urlRoot</strong>() <a class="anchor-link" href="#get:urlRoot"
              title="Permalink to HipsterModel.get urlRoot">#</a></h4>
<div class="doc">
<p>The base URL for REST-like operations <em>without</em> the trailing slash
(e.g. <code>/comics</code>). This is delegated to the collection if present.</p>
<p>If the subclass is ever used without a collection, then the subclass is
required to define this:</p>
<pre><code>class ComicBook extends HipsterModel {
  get urlRoot() =&gt; '/comics';
}
</code></pre>
<pre class="source">
String get urlRoot() =&gt; (collection == null) ?
  "" : collection.url;
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="attributes">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/Map.html" ref="external">Map</a>         <strong>attributes</strong> <a class="anchor-link"
            href="#attributes"
            title="Permalink to HipsterModel.attributes">#</a>
        </h4>
        <div class="doc">
<p>The internal representation of the record.</p>
<pre class="source">
Map attributes;
</pre>
</div>
</div>
<div class="field"><h4 id="collection">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/Collection.html" ref="external">Collection</a>         <strong>collection</strong> <a class="anchor-link"
            href="#collection"
            title="Permalink to HipsterModel.collection">#</a>
        </h4>
        <div class="doc">
<p>If the model is part of a collection, it will be stored here.</p>
<pre class="source">
Collection collection;
</pre>
</div>
</div>
<div class="field"><h4 id="on">
<span class="show-code">Code</span>
<a href="../hipster_model/ModelEvents.html">ModelEvents</a>         <strong>on</strong> <a class="anchor-link"
            href="#on"
            title="Permalink to HipsterModel.on">#</a>
        </h4>
        <div class="doc">
<p>An <code>Events</code> object for the model. Any internal changes to the model will
broadcast events from this object.  See <a class="crossref" href="../hipster_model/ModelEvents.html">ModelEvents</a> for the complete
list of events supported.</p>
<pre class="source">
ModelEvents on;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer"></div>
        </body></html>
        
